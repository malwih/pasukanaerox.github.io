<html>
<meta charset='UTF-8'/><meta content='width=device-width, initial-scale=1, user-scalable=1, minimum-scale=1, maximum-scale=5' name='viewport'/><meta content='IE=edge' http-equiv='X-UA-Compatible'/>
<link rel="preconnect" href="https://fonts.googleapis.com"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link href="https://fonts.googleapis.com/css2?family=Quicksand&display=swap" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11.0.19/dist/sweetalert2.all.min.js"></script><link href="style.css" rel="stylesheet" type="text/css" /><script src="script.js"></script>
<title>PASUKAN AEROX | MEMBER</title>
<head>
<link href='https://i.postimg.cc/y8Y4sfdT/Logo-Pasukan-Aerox.pnghttps://i.postimg.cc/y8Y4sfdT/Logo-Pasukan-Aerox.png' rel='SHORTCUT ICON'/>
</head>
<body>
<!-- Wallpaper --><style>body{background: linear-gradient(-45deg, #AD563C, #A92C5C, #1B81A5, #19987B);background-size: 400% 400%;animation: gradient 15s ease infinite;} @keyframes gradient {0% {background-position: 0% 50%;}50% {background-position: 100% 50%;}100% {background-position: 0% 50%;}}</style>
<div id="foto" class="foto" style="display:none">
<div class="image">
<!-- Foto Kamu --><img id="ftKm" src="https://img.hotimg.com/user-2.png" width="100px" height="100px"/>
<!-- Foto Aku --><img id="ftAk" style="opacity:0;position:absolute;" src="https://img.hotimg.com/Logo-Pasukan-Aerox.png" width="100px" height="100px"/></div>
<span id="sp1"><b id="namamu"></b><div id="lope" style="display:inline-block;align-items:center;justify-content:center;">&#10084;&#65039;</div></span>
<div id="sp2" style="display:none;"><span id="text5"></span></div>
</div>
  

<audio id="musikLatar" src="avangard.mp3"></audio>
<div id="overlay-lock" style="display: none;"></div>


<div id='Content' style="display:none"><div id='koteks' class="kolomteks"><p id="text"></p><p id="text2"></p><p id="text3"></p><p id="text4" style="font-weight:700;font-size: 12px"></p></div><div id="trm" class="contTom"><a style="margin:12px 12px 12px 12px;" class='button' onClick="finish();"></i>Setuju!</a></div><div id="whs" class="contTom"><a class='button whatsapp' onClick='bukaWa();'><i class='icon whatsapp'></i>Join Sekarang</a></div></div>

<!-- Teks Mengetik dan WhatsApp --><script>
  var a=0,text;
  text = "PERATURAN yang harus di terapkan oleh SEMUA MEMBER :"
  var i=0,text2;
  text2 = "üî• Menjaga Nama Baik PASUKAN AEROX! üö¶ Attitude Berkendara! (Tidak Membahayakan Pengendara lain) üö∫ Don't touch women! ü§ù Saling menghargai satu sama lain!"                   
  var u=0,text3;
  text3 = "üíî NO BAPER! NO AROGAN! NO KECHOT! üìå Atribut  STIKER yang di pakai / HOODIE / KAOS harus di jaga dengan baik! üîû TIDAK men-sharing yang berbau VULGAR!"
  var e=0,text4;
  var o=0,text5;
  text5 = "Keep Solid, "

//Opsi WhatsApp
 function bukaWa(){window.location = "https://api.whatsapp.com/send?phone=6285280091009&text=Hallo Admin " + "*" + author + "*" + "%0A%0A" + "Kenalin namaku " + "*" + nama + "*" + " umur " + "*" + persen + " Tahun" + "*" + " ingin bergabung di " + author + "%0A%0A" + "*" + "Nama Lengkap:" + "*" + "%0A" + nama + "%0A" + "*" + "Alamat Lengkap:" + "*" + "%0A" + alamat + ", " + kab + "%0A" + "*" + "Usia:" + "*" + "%0A" + persen + " Tahun" + "%0A" + "*" + "No. Plat:" + "*" + "%0A" + plat + "%0A" + "*" + "No. SIM/STNK:" + "*" + "%0A" + sim + "%0A"+ "*" + "No.WA:" + "*" + "%0A" + nowa + "%0A" + "*" + "Akun IG:" + "*" + "%0A" + "http://instagram.com/" + akunig + "%0A%0A" + "=============================" + "%0A" + "Wajib Follow Instagram dan TikTok PASUKAN AEROX" + "%0A" + "IG: https://instagram.com/pasukanaerox.id" + "%0A" + "TikTok: https://tiktok.com/@pasukanaerox" + "%0A%0A" + "*" + "Dikirim:" + "*" + "%20" + dateTime;} 
</script>
 
<script type="text/javascript">
            var author = 'Pasukan Aerox';
            var today = new Date();var date = today.getDate()+'/'+(today.getMonth()+1)+'/'+today.getFullYear()+'.';var dateTime = date;
            const swals = Swal.mixin({
                cancelButtonColor: '#909090',
                confirmButtonColor: '#00B487',
                allowOutsideClick: false,
            });
            async function mulai() {    
// Tampilkan overlay untuk mengunci klik
const overlay = document.getElementById("overlay-lock");
    overlay.style.display = "block";

    // Ambil elemen audio
const audioElement = document.getElementById("musikLatar");

// Fungsi untuk memutar musik
async function putarMusik() {
    try {
        if (audioElement.paused || audioElement.ended) {
            // Jika musik belum diputar atau sudah selesai, mulai dari awal
            await audioElement.play();
            console.log("Musik berhasil diputar.");
        } else {
            // Jika musik sudah diputar dan masih berlanjut, lanjutkan pemutaran
            console.log("Musik sedang diputar...");
        }
    } catch (err) {
        console.error("Gagal memutar musik:", err);
        await Swal.fire({
            icon: "error",
            title: "Musik tidak dapat diputar",
            text: "Pastikan browser mengizinkan pemutaran audio!",
        });
    }
}

// Tampilkan notifikasi "Siap bergabung di Pasukan Aerox?"
const { isConfirmed } = await Swal.fire({
    title: "Siap bergabung di Pasukan Aerox?",
    text: "Klik 'Siap!' untuk memulai perjalanan Anda.",
    confirmButtonText: "Siap!",
    allowOutsideClick: false, // Nonaktifkan klik di luar modal
    allowEscapeKey: false,   // Nonaktifkan tombol escape
    allowEnterKey: true,     // Izinkan tombol enter
});

if (isConfirmed) {
    // Mulai memutar musik setelah klik "Siap!"
    await putarMusik();

    // Sembunyikan overlay setelah selesai
    overlay.style.display = "none";

    // Lakukan sesuatu setelah nama diterima
    document.getElementById("namamu").innerHTML = "Halo, " + nama + "!";
} else {
    // Jika pengguna klik "Batal", coba tutup browser
    await Swal.fire({
        icon: "info",
        title: "Sampai jumpa!",
        text: "Tab akan ditutup.",
        showConfirmButton: false,
        timer: 2000,
    });

        // Tutup tab
        window.close();

        // Jika `window.close()` gagal, beri tahu pengguna
        setTimeout(() => {
            alert("Silakan tutup tab ini secara manual.");
        }, 2000);
    }
                
    var nama, alamat, kab, plat, sim, nowa, akunig, persen;

    // Input Nama
    while (!nama) {
        var { value: inputNama } = await swals.fire({
            title: 'Nama lengkap kamu?',
            input: 'text',
            confirmButtonText: 'Lanjut',
            showCancelButton: false,
        });

        if (inputNama && inputNama.trim() !== "") {
            nama = inputNama;
        } else {
            await swals.fire('Nama tidak boleh kosong, ya!');
        }
    }

    window.nama = nama;
    text5 = text5 + window.nama + "!";

    // Input Alamat dengan 9 kolom (Beberapa wajib diisi)
while (!alamat) {
    var { value: inputAlamat } = await swals.fire({
        title: 'Alamat Domisili?',
        html: `
            <div style="display: flex; flex-direction: column; gap: 8px;">
                <input id="namaJalan" type="text" placeholder="Nama Jalan (Opsional)" style="width: 100%;" />
                <input id="desaPerumahan" type="text" placeholder="Desa/Perumahan (Wajib)" style="width: 100%;" />
                <input id="noRumah" type="text" placeholder="No. Rumah/Blok (Wajib)" style="width: 100%;" />
                <div style="display: flex; gap: 8px;">
                    <input id="rt" type="number" placeholder="RT (Wajib)" style="width: 50%;" />
                    <input id="rw" type="number" placeholder="RW (Wajib)" style="width: 50%;" />
                </div>
                <input id="kelurahan" type="text" placeholder="Kelurahan (Wajib)" style="width: 100%;" />
                <input id="kecamatan" type="text" placeholder="Kecamatan (Wajib)" style="width: 100%;" />
            </div>
        `,
        confirmButtonText: 'Lanjut',
        showCancelButton: false,
        preConfirm: () => {
            const namaJalan = document.getElementById('namaJalan').value.trim();
            const desaPerumahan = document.getElementById('desaPerumahan').value.trim();
            const noRumah = document.getElementById('noRumah').value.trim();
            const rt = document.getElementById('rt').value.trim();
            const rw = document.getElementById('rw').value.trim();
            const kelurahan = document.getElementById('kelurahan').value.trim();
            const kecamatan = document.getElementById('kecamatan').value.trim();

            if (!desaPerumahan) {
                Swal.showValidationMessage('Desa/Perumahan wajib diisi!');
                return false;
            }
            if (!noRumah) {
                Swal.showValidationMessage('No. Rumah/Blok wajib diisi!');
                return false;
            }
            if (!rt) {
                Swal.showValidationMessage('RT wajib diisi!');
                return false;
            }
            if (!rw) {
                Swal.showValidationMessage('RW wajib diisi!');
                return false;
            }
            if (!kelurahan) {
                Swal.showValidationMessage('Kelurahan wajib diisi!');
                return false;
            }
            if (!kecamatan) {
                Swal.showValidationMessage('Kecamatan wajib diisi!');
                return false;
            }

            return {
                namaJalan,
                desaPerumahan,
                noRumah,
                rt,
                rw,
                kelurahan,
                kecamatan,
            };
        },
    });

    if (inputAlamat) {
        // Gabungkan semua input menjadi alamat lengkap
        alamat = `
            ${inputAlamat.namaJalan ? inputAlamat.namaJalan + ', ' : ''}
            ${inputAlamat.desaPerumahan}, No. ${inputAlamat.noRumah}, 
            RT ${inputAlamat.rt}/RW ${inputAlamat.rw}, 
            Kel. ${inputAlamat.kelurahan}, Kec. ${inputAlamat.kecamatan}
        `.trim().replace(/\s+/g, ' ');

        window.alamat = alamat;
    } else {
        await swals.fire('Alamat tidak boleh kosong, ya!');
    }
}


    // Input Kota/Kabupaten dengan dropdown
    while (!kab) {
        var { value: inputKab } = await swals.fire({
            title: 'Kota/Kabupaten mana?',
            input: 'select',
            inputOptions: {
                'Aceh': {
                    'Banda Aceh': 'Banda Aceh',
                    'Sabang': 'Sabang',
                    'Lhokseumawe': 'Lhokseumawe',
                },
                'Banten': {
                    'Serang': 'Serang',
                    'Cilegon': 'Cilegon',
                    'Tangerang': 'Tangerang',
                },
                'DKI Jakarta': {
                'Jakarta': 'Jakarta',
                },
                'Jawa Barat': {
                    'Bandung': 'Bandung',
                    'Bekasi': 'Bekasi',
                    'Bogor': 'Bogor',
                    'Depok': 'Depok',
                    'Cimahi': 'Cimahi',
                },
                'Jawa Timur': {
                    'Surabaya': 'Surabaya',
                    'Malang': 'Malang',
                    'Kediri': 'Kediri',
                },
                'Jawa Tengah': {
                    'Semarang': 'Semarang',
                    'Solo': 'Solo',
                    'Magelang': 'Magelang',
                },
                'Sumatera Utara': {
                    'Medan': 'Medan',
                    'Binjai': 'Binjai',
                    'Deli Serdang': 'Deli Serdang',
                },
            },
            inputPlaceholder: 'Pilih Kota/Kabupaten',
            confirmButtonText: 'Lanjut',
            showCancelButton: false,
        });

        if (inputKab && inputKab.trim() !== "") {
            kab = inputKab;
        } else {
            await swals.fire('Kota/Kabupaten tidak boleh kosong, ya!');
        }
    }

    window.kab = kab;

    // Validasi Kota/Kabupaten
    if (kab !== 'Bekasi' && kab !== 'Bandung' && kab !== 'Cimahi') {
        await swals.fire({
            icon: 'error',
            title: 'Maaf!',
            text: `Pasukan Aerox belum tersedia di ${kab}!`,
        });

        // Kembali ke pengisian Kota/Kabupaten
        return mulai();
    }

    // Input Nomor Plat (3 kolom: kode kota, nomor plat, alokasi TNKB)
while (!plat) {
    var { value: inputPlat } = await swals.fire({
        title: 'Nomor Plat?',
        html: `
            <div style="display: flex; flex-direction: column; align-items: center; gap: 8px;">
                <div style="display: flex; gap: 4px;">
                    <input id="kodeKota" type="text" maxlength="2" placeholder="D" style="width: 60px; text-transform: uppercase;" />
                    <input id="nomorPlat" type="number" maxlength="4" placeholder="1234" style="width: 80px;" />
                    <input id="alokasiTNKB" type="text" maxlength="4" placeholder="ABC" style="width: 80px; text-transform: uppercase;" />
                </div>
            </div>
        `,
        showCancelButton: false,
        confirmButtonText: 'Lanjut',
        preConfirm: () => {
            const kodeKota = document.getElementById('kodeKota').value.trim().toUpperCase();
            const nomorPlat = document.getElementById('nomorPlat').value.trim();
            const alokasiTNKB = document.getElementById('alokasiTNKB').value.trim().toUpperCase();

            if (!/^[A-Z]{1,2}$/.test(kodeKota)) {
                Swal.showValidationMessage('Kode Kota harus berupa 1-2 huruf!');
                return false;
            }
            if (!/^\d{1,4}$/.test(nomorPlat)) {
                Swal.showValidationMessage('Nomor Plat harus berupa 1-4 digit angka!');
                return false;
            }
            if (!/^[A-Z]{1,4}$/.test(alokasiTNKB)) {
                Swal.showValidationMessage('Alokasi TNKB harus berupa 1-4 huruf!');
                return false;
            }

            return { kodeKota, nomorPlat, alokasiTNKB };
        },
    });

    if (inputPlat) {
        plat = `${inputPlat.kodeKota} ${inputPlat.nomorPlat} ${inputPlat.alokasiTNKB}`;
    } else {
        await swals.fire('Nomor Plat tidak boleh kosong, ya!');
    }
}

window.plat = plat;


    // Input SIM/STNK dengan Radio Button
while (!sim) {
    var { value: inputSIMSTNK } = await swals.fire({
        title: 'Pilih tipe dokumen dan masukkan nomor:',
        html: `
            <div style="display: flex; flex-direction: column; gap: 12px;">
                <div>
                    <label><input type="radio" name="tipe" value="SIM" id="radioSIM"> SIM</label>
                    <label><input type="radio" name="tipe" value="STNK" id="radioSTNK"> STNK</label>
                </div>
                <input id="nomorDokumen" type="number" placeholder="Masukkan nomor dokumen" style="width: 100%; display: none;" />
            </div>
        `,
        confirmButtonText: 'Lanjut',
        showCancelButton: true,
        cancelButtonText: 'Tidak Punya',
        preConfirm: () => {
            const radioSIM = document.getElementById('radioSIM').checked;
            const radioSTNK = document.getElementById('radioSTNK').checked;
            const nomorDokumen = document.getElementById('nomorDokumen').value.trim();

            if (!radioSIM && !radioSTNK) {
                Swal.showValidationMessage('Silakan pilih tipe dokumen (SIM atau STNK)!');
                return false;
            }

            if (!nomorDokumen) {
                Swal.showValidationMessage('Nomor dokumen wajib diisi!');
                return false;
            }

            return {
                tipe: radioSIM ? 'SIM' : 'STNK',
                nomor: nomorDokumen,
            };
        },
        didOpen: () => {
            // Event listener untuk menampilkan input nomor dokumen ketika tipe dipilih
            const radioButtons = document.querySelectorAll('input[name="tipe"]');
            const nomorInput = document.getElementById('nomorDokumen');

            radioButtons.forEach((radio) => {
                radio.addEventListener('change', () => {
                    nomorInput.style.display = 'block';
                });
            });
        },
    });

    if (inputSIMSTNK) {
        sim = `${inputSIMSTNK.tipe}: ${inputSIMSTNK.nomor}`;
        window.sim = sim;
    } else {
        await swals.fire('Kamu harus punya SIM atau STNK untuk melanjutkan!');
    }
}

    // Input Nomor WhatsApp
while (!nowa) {
    var { value: inputNoWA } = await swals.fire({
        title: 'Masukkan nomor WhatsApp kamu:',
        html: `
            <div style="display: flex; align-items: center; gap: 8px;">
                <span style="font-size: 16px; font-weight: bold;">+62</span>
                <input id="nomorWA" type="number" placeholder="81234567890" style="flex: 1; padding: 8px; font-size: 14px;" />
            </div>
        `,
        confirmButtonText: 'Lanjut',
        showCancelButton: true,
        cancelButtonText: 'Batal',
        preConfirm: () => {
            const nomorWA = document.getElementById('nomorWA').value.trim();

            // Validasi input
            if (!nomorWA || nomorWA.length < 9 || nomorWA.length > 12) {
                Swal.showValidationMessage('Nomor WhatsApp harus terdiri dari 9-12 digit angka!');
                return false;
            }

            if (!/^[0-9]+$/.test(nomorWA)) {
                Swal.showValidationMessage('Nomor WhatsApp hanya boleh mengandung angka!');
                return false;
            }

            return `+62${nomorWA}`;
        },
    });

    if (inputNoWA) {
        nowa = inputNoWA;
        window.nowa = nowa;
    } else {
        await swals.fire('Nomor WhatsApp wajib diisi untuk melanjutkan!');
    }
}

    // Input Username Instagram
while (!akunig) {
    var { value: usernameIG } = await swals.fire({
        title: 'Masukkan username Instagram kamu:',
        html: `
            <input id="usernameIG" type="text" placeholder="Masukkan username tanpa @" style="width: 100%; padding: 8px; font-size: 14px;" />
        `,
        confirmButtonText: 'Lanjut',
        showCancelButton: true,
        cancelButtonText: 'Batal',
        preConfirm: () => {
            const username = document.getElementById('usernameIG').value.trim();

            if (!username) {
                Swal.showValidationMessage('Username Instagram tidak boleh kosong!');
                return false;
            }

            return username;
        },
    });

    if (usernameIG) {
        const profileUrl = `https://instagram.com/${usernameIG}`;
        const confirmProfile = await swals.fire({
            title: `Apakah ini profil Instagram kamu?`,
            html: `
                <a href="${profileUrl}" target="_blank" style="text-decoration: none; color: #3897f0; font-weight: bold;">
                    ${profileUrl}
                </a>
                <div style="margin-top: 12px;">
                    Klik tautan di atas untuk memeriksa profil kamu.
                </div>
            `,
            confirmButtonText: 'Ya, Lanjut',
            showCancelButton: true,
            cancelButtonText: 'Tidak',
        });

        if (confirmProfile.isConfirmed) {
            akunig = usernameIG;
            window.akunig = akunig;
        } else {
            await swals.fire('Masukkan username Instagram yang benar!');
        }
    } else {
        await swals.fire('Username Instagram wajib diisi!');
    }
}


    // Input Umur (using dropdown)
while (!persen) {
    var { value: inputPersen } = await swals.fire({
        title: nama + ' mau gabung di ' + author + ' kan?',
        html: `
            <div style="display: flex; flex-direction: column; gap: 8px;">
                <label for="umur">Pilih umur (10-50 tahun):</label>
                <select id="umur" style="padding: 8px;">
                    ${Array.from({ length: 41 }, (_, i) => i + 10)
                        .map(age => `<option value="${age}">${age} tahun</option>`)
                        .join('')}
                </select>
            </div>
        `,
        confirmButtonText: 'Lanjut',
        showCancelButton: false,
        preConfirm: () => {
            const selectedAge = document.getElementById('umur').value;

            if (selectedAge < 16) {
                Swal.showValidationMessage('Umur harus di atas 16 tahun!');
                return false;
            }

            return selectedAge;
        },
    });

    if (inputPersen) {
        persen = inputPersen;
        window.persen = persen;
    } else {
        await swals.fire('Umur harus dipilih, ya!');
    }
}

// Langkah upload foto setelah memilih umur
let foto = null;
while (!foto) {
    const { value: uploadedImage } = await swals.fire({
        title: 'Upload foto bersama motor Aerox',
        input: 'file',
        inputAttributes: {
            accept: 'image/*',
        },
        confirmButtonText: 'Lanjut',
        showCancelButton: true,
        cancelButtonText: 'Batal',
        preConfirm: async (fileInput) => {
            if (!fileInput) {
                Swal.showValidationMessage('Foto wajib diupload!');
                return false;
            }

            // Randomly simulate an upload delay between 3 to 5 seconds (3000ms to 5000ms)
            const randomDelay = Math.floor(Math.random() * 2000) + 3000;
            let progress = 0;

            // Simulate progress bar with delay
            const progressInterval = setInterval(() => {
                progress += 10;
                if (progress >= 100) {
                    clearInterval(progressInterval);
                }

                // Update the progress bar
                Swal.update({
                    title: `Uploading... ${progress}%`,
                    html: `<progress value="${progress}" max="100" style="width: 100%"></progress>`,
                });
            }, randomDelay / 10); // Divide the total delay by 10 for smoother animation (each step = 10%)

            // Simulate upload by waiting for the random delay
            await new Promise(resolve => setTimeout(resolve, randomDelay));

            // Using URL.createObjectURL to create a temporary URL for the uploaded file
            const fileURL = URL.createObjectURL(fileInput);
            return fileURL; // Returning the temporary URL
        },
    });

    if (uploadedImage) {
        foto = uploadedImage;
        window.foto = foto;

        // Displaying the uploaded image in an img element with id 'ftKm'
        const imgElement = document.getElementById('ftKm');
        imgElement.src = foto;

        await swals.fire(`Foto berhasil diupload!`);
    } else {
        await swals.fire('Foto tidak boleh kosong!');
    }
}




// Pertanyaan survei komitmen
const questions = [
    "Apakah kamu bersedia mengikuti acara Pasukan Aerox secara rutin?",
    "Apakah kamu nyaman berinteraksi dengan anggota baru?",
    "Apakah kamu memahami bahwa Pasukan Aerox bukan komunitas?",
    "Apakah kamu memiliki minat terhadap kegiatan otomotif?",
    "Apakah kamu bersedia membantu promosi Pasukan Aerox di media sosial?",
    "Apakah kamu bersedia berkontribusi dalam kegiatan Pasukan Aerox?",
    "Apakah kamu merasa Pasukan Aerox ini dapat memberikan nilai tambah untukmu?",
    "Apakah kamu bersedia mematuhi aturan Pasukan Aerox?",
    "Apakah kamu bersedia membantu anggota jika diperlukan?",
    "Apakah kamu bersedia menghadiri rapat Pasukan Aerox jika ada acara?",
    "Apakah kamu memiliki waktu untuk aktif di kegiatan Pasukan Aerox?",
    "Apakah kamu setuju untuk mendukung sesama anggota Pasukan Aerox?",
    "Apakah kamu bersedia mengikuti acara Pasukan Aerox jika diadakan?",
    "Apakah kamu merasa Pasukan Aerox ini sejalan dengan hobimu?",
    "Apakah kamu siap menjadi anggota yang aktif?",
    "Apakah kamu nyaman dengan kegiatan yang melibatkan motor?",
    "Apakah kamu siap membantu menyelesaikan masalah dalam Pasukan Aerox?",
    "Apakah kamu bersedia menjadi panitia dalam acara Pasukan Aerox?",
    "Apakah kamu setuju untuk menjaga nama baik Pasukan Aerox?",
    "Apakah kamu siap untuk mengikuti Pasukan Aerox dalam jangka panjang?"
];

async function startSurvey() {
    let totalScore = 0;
    const maxScore = questions.length * 5; // Maksimal skor: 20 soal x 5 (sangat setuju)

    for (const question of questions) {
        const { value: answer } = await Swal.fire({
            title: question,
            html: `
                <div class="survey-options">
                    <label class="survey-option">
                        <input type="radio" name="answer" value="6"> Sangat Setuju
                    </label>
                    <label class="survey-option">
                        <input type="radio" name="answer" value="5"> Setuju
                    </label>
                    <label class="survey-option">
                        <input type="radio" name="answer" value="4"> Agak Setuju
                    </label>
                    <label class="survey-option">
                        <input type="radio" name="answer" value="3"> Kurang Setuju
                    </label>
                    <label class="survey-option">
                        <input type="radio" name="answer" value="2"> Tidak Setuju
                    </label>
                    <label class="survey-option">
                        <input type="radio" name="answer" value="1"> Sangat Tidak Setuju
                    </label>
                </div>
            `,
            confirmButtonText: 'Lanjut',
            showCancelButton: false,
            didOpen: () => {
                // Style untuk merapikan pilihan radio
                const style = `
                    <style>
                        .survey-options {
                            display: flex;
                            flex-direction: column;
                            gap: 10px;
                            margin-top: 10px;
                        }
                        .survey-option {
                            display: flex;
                            align-items: center;
                            gap: 5px;
                        }
                        .survey-option input {
                            margin-right: 5px;
                        }
                    </style>
                `;
                document.head.insertAdjacentHTML('beforeend', style);
            }
        });

        // Ambil nilai jawaban dari radio button yang dipilih
        const selectedAnswer = document.querySelector('input[name="answer"]:checked');

        // Jika tidak ada jawaban yang dipilih, tampilkan pesan dan ulangi
        if (!selectedAnswer) {
            await Swal.fire({
                icon: 'warning',
                title: 'Peringatan!',
                text: 'Silakan pilih jawaban untuk melanjutkan!',
                confirmButtonText: 'Oke'
            });

            // Ulangi lagi pertanyaan yang belum terjawab
            return startSurvey();
        }

        // Menambahkan nilai skor berdasarkan jawaban yang dipilih
        totalScore += parseInt(selectedAnswer.value, 10);
    }

    // Pastikan skor total tidak melebihi skor maksimum
    totalScore = Math.min(totalScore, maxScore);

    // Hitung persentase komitmen
    const commitmentPercentage = (totalScore / maxScore) * 100;

    // Tampilkan hasil
    if (commitmentPercentage >= 85) {  // Update this condition to 80% instead of 70%
        await Swal.fire({
            icon: 'success',
            title: 'Selamat!',
            text: `Komitmenmu sebesar ${commitmentPercentage.toFixed(2)}%. Kamu bisa bergabung dengan Pasukan Aerox!`,
            confirmButtonText: 'Lanjut'
        });

        // Start color blindness test after successful commitment survey
        await colorBlindnessTest();
    } else {
        await Swal.fire({
            icon: 'error',
            title: 'Maaf!',
            text: `Komitmenmu hanya sebesar ${commitmentPercentage.toFixed(2)}%. Kamu perlu minimal 80% untuk bergabung.`,
            confirmButtonText: 'Coba Lagi'
        });

        // Mulai ulang dari tampilan pesan siap bergabung
        return startSurvey();
    }
}

// Color Blindness Test
async function colorBlindnessTest() {
    const questions = [
        { image: 'merah.png', correctAnswer: 'merah' },
        { image: 'hijau.jpg', correctAnswer: 'hijau' },
        { image: 'biru.jpg', correctAnswer: 'biru' },
        { image: 'pink.png', correctAnswer: 'pink' },
        { image: 'kuning.jpg', correctAnswer: 'kuning' },
        { image: 'hitam.png', correctAnswer: 'hitam' },
    ];

    let score = 0;

    for (let i = 0; i < questions.length; i++) {
        const { image, correctAnswer } = questions[i];

        let userAnswer = null;
        while (!userAnswer) {
            const { value: answer } = await Swal.fire({
                title: `Soal ${i + 1}: Apa warna yang kamu lihat?`,
                imageUrl: image,  // Replace with actual image URL
                imageWidth: 300,  // Set image width to 300px for consistency
                imageHeight: 200, // Set image height to 200px
                imageAlt: 'Warna Tes', // Alt text for the image
                input: 'text',
                inputPlaceholder: 'Tulis warna yang kamu lihat...',
                inputAttributes: {
                    'aria-label': 'Jawaban',
                },
                confirmButtonText: 'Kirim Jawaban',
                showCancelButton: true,
                cancelButtonText: 'Batal',
                allowOutsideClick: false, // Prevent the modal from being dismissed by clicking outside
                allowEscapeKey: false,   // Disable closing by Escape key
                preConfirm: (inputValue) => {
                    if (!inputValue) {
                        Swal.showValidationMessage('Jawaban tidak boleh kosong!');
                        return false;
                    }
                    return inputValue;
                },
                didOpen: () => {
                    // Apply responsive image styling
                    const imgElement = document.querySelector('.swal2-image');
                    imgElement.style.maxWidth = '100%';  // Ensure image is responsive
                    imgElement.style.height = 'auto';    // Maintain aspect ratio
                    imgElement.style.objectFit = 'contain'; // Contain the image within its container
                }
            });

            if (answer) {
                // Check if the answer is correct
                if (answer.toLowerCase() === correctAnswer.toLowerCase()) {
                    score++;
                }
                userAnswer = answer; // Set userAnswer to allow moving to the next question
            } else {
                // If user clicked 'Cancel', exit the test early
                return Swal.fire({
                    icon: 'warning',
                    title: 'Tes dibatalkan',
                    text: 'Kamu telah membatalkan tes warna.',
                    confirmButtonText: 'Tutup'
                });
            }
        }
    }

    // Hitung persentase hasil tes buta warna
    const colorBlindnessPercentage = (score / questions.length) * 100;

    // Tampilkan hasil
    if (colorBlindnessPercentage >= 100) {
        await Swal.fire({
            icon: 'success',
            title: 'Tes Buta Warna Berhasil!',
            text: `Hasil: ${colorBlindnessPercentage.toFixed(2)}%. Kamu tidak buta warna!`,
            confirmButtonText: 'Lanjut'
        });
    } else {
        await Swal.fire({
            icon: 'warning',
            title: 'Tes Buta Warna Gagal!',
            text: `Hasil: ${colorBlindnessPercentage.toFixed(2)}%. Kamu harus 100% untuk melanjutkan.`,
            confirmButtonText: 'Coba Lagi'
        });

        // Restart the color blindness test if failed
        return colorBlindnessTest();
    }
}



// Panggil survei setelah input umur selesai
await startSurvey();



    document.getElementById("namamu").innerHTML = "Halo, " + nama + "!";
    text4 = "Dari: " + author + ", Untuk: " + nama + ".";
    await swals.fire(`Terima Kasih &#128149;`);
    ketik();
    showDiv();
    showFt();
}

//funct Mulai
mulai()            
</script>
</body>
</html>
